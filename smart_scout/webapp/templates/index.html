<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Scout // Vayne Consulting</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link
        href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=JetBrains+Mono:wght@400;600&family=Syncopate:wght@700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="/static/css/style.css">
</head>

<body>
    <!-- Sidebar -->
    <nav class="sidebar">
        <div class="sidebar-header">
            <span class="brand-word">VAYNE</span>
            <span class="brand-sub">SMART SCOUT</span>
        </div>
        <ul class="nav-items">
            <li class="nav-item active" data-panel="industries">
                <span class="nav-icon">⬡</span> Industries
            </li>
            <li class="nav-item" data-panel="build">
                <span class="nav-icon">⊕</span> Build
            </li>
            <li class="nav-item" data-panel="advise">
                <span class="nav-icon">◈</span> Advise
            </li>
            <li class="nav-item" data-panel="audit">
                <span class="nav-icon">◉</span> Audit
            </li>
            <li class="nav-item" data-panel="reports">
                <span class="nav-icon">⊞</span> Reports
            </li>
        </ul>
        <div class="sidebar-footer">
            <span class="status-dot" id="statusDot"></span>
            <span id="statusText">Ready</span>
        </div>
    </nav>

    <!-- Main content -->
    <main class="main">

        <!-- ── Industries Panel ───────────────────────────────── -->
        <section id="panel-industries" class="panel active">
            <div class="panel-header">
                <h1>Industry Configs</h1>
                <button class="btn btn-primary" id="btnNewIndustry">+ New Industry</button>
            </div>
            <p class="panel-desc">The engine's intelligence layer. Each config defines a vertical — its search keywords,
                pain points, scoring rules, and outreach angle.</p>
            <div class="card-grid" id="industryGrid">
                <div class="loading-spinner">Loading industries…</div>
            </div>

            <!-- Edit / Create Modal -->
            <div class="modal-overlay hidden" id="industryModal">
                <div class="modal">
                    <div class="modal-header">
                        <h2 id="modalTitle">Edit Industry</h2>
                        <button class="modal-close" id="modalClose">✕</button>
                    </div>
                    <div class="modal-body">
                        <label class="form-label">Slug (filename, no spaces)</label>
                        <input class="form-control" id="industrySlug" type="text" placeholder="e.g. yacht_brokers">
                        <label class="form-label" style="margin-top:1rem">YAML Configuration</label>
                        <textarea class="form-control code-area" id="industryYaml" rows="22"
                            spellcheck="false"></textarea>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-ghost" id="modalCancel">Cancel</button>
                        <button class="btn btn-primary" id="modalSave">Save Configuration</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- ── Build Panel ──────────────────────────────────────── -->
        <section id="panel-build" class="panel">
            <div class="panel-header">
                <h1>Build Target List</h1>
            </div>
            <p class="panel-desc">Generate a list of target URLs from Google for a given industry and location.</p>
            <div class="two-col">
                <div class="form-card">
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Industry</label>
                            <select class="form-control" id="buildIndustry"></select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Location <span class="hint">(overrides config)</span></label>
                            <input class="form-control" id="buildLocation" type="text" placeholder="e.g. Montreal">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Target Count</label>
                            <input class="form-control" id="buildCount" type="number" value="50" min="5" max="500">
                        </div>
                        <div class="form-group">
                            <label class="form-label">Search Engine</label>
                            <select class="form-control" id="buildEngine">
                                <option value="google">Google CSE (Free)</option>
                                <option value="serpapi">SerpAPI (Paid)</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Additional Keywords <span
                                class="hint">(comma-separated)</span></label>
                        <input class="form-control" id="buildKeywords" type="text"
                            placeholder="e.g. notary, civil lawyer">
                    </div>
                    <div class="form-group">
                        <label class="form-label">Additional Locations <span
                                class="hint">(comma-separated)</span></label>
                        <input class="form-control" id="buildLocations" type="text" placeholder="e.g. Laval, Longueuil">
                    </div>
                    <div class="form-row">
                        <div class="form-group toggle-group">
                            <label class="form-label">Dry Run</label>
                            <label class="toggle"><input type="checkbox" id="buildDryRun" checked><span
                                    class="slider"></span></label>
                            <span class="toggle-hint" id="buildDryLabel">On — no API calls</span>
                        </div>
                    </div>
                    <button class="btn btn-primary btn-full" id="btnRunBuild">Run Build</button>
                </div>
                <div class="terminal-card">
                    <div class="terminal-header">
                        <span class="term-dot red"></span><span class="term-dot yellow"></span><span
                            class="term-dot green"></span>
                        <span class="term-title">scout output</span>
                    </div>
                    <div class="terminal-body" id="buildTerminal"><span class="term-prompt">Waiting for run…</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- ── Advise Panel ─────────────────────────────────────── -->
        <section id="panel-advise" class="panel">
            <div class="panel-header">
                <h1>Advisory Report</h1>
            </div>
            <p class="panel-desc">Generate a strategic pre-flight brief before outreach. The LLM analyzes the industry's
                digital landscape and advises on positioning and priorities.</p>
            <div class="two-col">
                <div class="form-card">
                    <div class="form-group">
                        <label class="form-label">Industry</label>
                        <select class="form-control" id="adviseIndustry"></select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Custom Notes <span class="hint">(optional run-specific
                                intel)</span></label>
                        <textarea class="form-control" id="adviseNotes" rows="4"
                            placeholder="e.g. Focus on bilingual sites in Quebec. Avoid large national chains."></textarea>
                    </div>
                    <button class="btn btn-primary btn-full" id="btnRunAdvise">Generate Advisory</button>
                    <div class="terminal-card" style="margin-top:1rem">
                        <div class="terminal-header">
                            <span class="term-dot red"></span><span class="term-dot yellow"></span><span
                                class="term-dot green"></span>
                            <span class="term-title">scout output</span>
                        </div>
                        <div class="terminal-body" id="adviseTerminal"><span class="term-prompt">Waiting for run…</span>
                        </div>
                    </div>
                </div>
                <div class="preview-card">
                    <div class="preview-header">
                        <span>Advisory Preview</span>
                        <button class="btn btn-ghost btn-sm hidden" id="btnDownloadAdvisory">Export .md</button>
                    </div>
                    <div class="preview-body" id="advisePreview">
                        <span class="preview-placeholder">Advisory report will render here after generation.</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- ── Audit Panel ──────────────────────────────────────── -->
        <section id="panel-audit" class="panel">
            <div class="panel-header">
                <h1>Audit Targets</h1>
            </div>
            <p class="panel-desc">Run the full intelligence pipeline — site checks, contact extraction, industry-aware
                LLM analysis, and outreach draft generation.</p>
            <div class="two-col">
                <div class="form-card">
                    <div class="form-group">
                        <label class="form-label">Industry</label>
                        <select class="form-control" id="auditIndustry"></select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Target Source</label>
                        <div class="radio-group">
                            <label class="radio-label"><input type="radio" name="targetSrc" value="file" id="srcFile"
                                    checked> Saved file</label>
                            <label class="radio-label"><input type="radio" name="targetSrc" value="paste" id="srcPaste">
                                Paste URLs</label>
                        </div>
                    </div>
                    <div class="form-group" id="fileSourceGroup">
                        <label class="form-label">Target File</label>
                        <select class="form-control" id="auditTargetFile"></select>
                    </div>
                    <div class="form-group hidden" id="pasteSourceGroup">
                        <label class="form-label">URLs <span class="hint">(one per line)</span></label>
                        <textarea class="form-control" id="auditTargetUrls" rows="5"
                            placeholder="https://example.com&#10;https://anothersite.ca"></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label class="form-label">Limit</label>
                            <input class="form-control" id="auditLimit" type="number" value="10" min="1" max="500">
                        </div>
                        <div class="form-group toggle-group">
                            <label class="form-label">Dry Run</label>
                            <label class="toggle"><input type="checkbox" id="auditDryRun" checked><span
                                    class="slider"></span></label>
                            <span class="toggle-hint" id="auditDryLabel">On — no HTTP/LLM calls</span>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="form-label">Notes <span class="hint">(optional)</span></label>
                        <textarea class="form-control" id="auditNotes" rows="2"
                            placeholder="Any run-specific context…"></textarea>
                    </div>
                    <button class="btn btn-primary btn-full" id="btnRunAudit">Run Audit</button>

                    <!-- Progress -->
                    <div class="progress-wrap hidden" id="auditProgress">
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <span id="progressLabel">0 / 0</span>
                    </div>

                    <div class="terminal-card" style="margin-top:1rem">
                        <div class="terminal-header">
                            <span class="term-dot red"></span><span class="term-dot yellow"></span><span
                                class="term-dot green"></span>
                            <span class="term-title">scout output</span>
                        </div>
                        <div class="terminal-body" id="auditTerminal"><span class="term-prompt">Waiting for run…</span>
                        </div>
                    </div>
                </div>
                <div class="preview-card">
                    <div class="preview-header">
                        <span>Audit Summary</span>
                        <button class="btn btn-ghost btn-sm hidden" id="btnDownloadAudit">Export .md</button>
                    </div>
                    <div class="preview-body" id="auditPreview">
                        <span class="preview-placeholder">Audit summary will render here after completion.</span>
                    </div>
                </div>
            </div>
        </section>

        <!-- ── Reports Panel ────────────────────────────────────── -->
        <section id="panel-reports" class="panel">
            <div class="panel-header">
                <h1>Reports</h1>
                <button class="btn btn-ghost" id="btnRefreshReports">↻ Refresh</button>
            </div>
            <p class="panel-desc">All advisory and audit reports generated by Smart Scout, grouped by industry.</p>
            <div class="two-col">
                <div class="reports-list" id="reportsList">
                    <div class="loading-spinner">Loading reports…</div>
                </div>
                <div class="preview-card">
                    <div class="preview-header">
                        <span id="reportPreviewTitle">Select a report</span>
                        <button class="btn btn-ghost btn-sm hidden" id="btnDownloadReport">Download</button>
                    </div>
                    <div class="preview-body" id="reportPreview">
                        <span class="preview-placeholder">Click a report to view it here.</span>
                    </div>
                </div>
            </div>
        </section>

    </main>

    <script src="/static/js/app.js"></script>
</body>

</html>